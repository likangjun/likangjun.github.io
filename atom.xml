<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Likangjun</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://likangjun.com/"/>
  <updated>2016-10-26T12:08:56.000Z</updated>
  <id>http://likangjun.com/</id>
  
  <author>
    <name>Likangjun</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>php+ajax 简易即时聊天室</title>
    <link href="http://likangjun.com/2016/10/26/php-ajax-%E7%AE%80%E6%98%93%E5%8D%B3%E6%97%B6%E8%81%8A%E5%A4%A9%E5%AE%A4/"/>
    <id>http://likangjun.com/2016/10/26/php-ajax-简易即时聊天室/</id>
    <published>2016-10-26T11:53:58.000Z</published>
    <updated>2016-10-26T12:08:56.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="php-ajax-简易即时聊天室"><a href="#php-ajax-简易即时聊天室" class="headerlink" title="php+ajax 简易即时聊天室"></a>php+ajax 简易即时聊天室</h2><p>github的地址是：<a href="https://github.com/likangjun/chat" target="_blank" rel="external">https://github.com/likangjun/chat</a><br>demo: <a href="http://demo.likangjun.com/chat" target="_blank" rel="external">http://demo.likangjun.com/chat</a></p>
<p>这里是用<code>MySQL</code>和<code>txt</code>文件来保存的聊天记录，然后用js去不断的请求聊天内容展现到页面上而达到了即时的效果，这里也可以用<code>redis</code>这种<code>nosql</code>。之前还在网上看到过一个<code>PHP+Swoole</code>扩展的即时聊天项目，地址是<a href="https://github.com/matyhtf/php-webim" target="_blank" rel="external">https://github.com/matyhtf/php-webim</a> ，也值得去学习学习</p>
<p>先看下文件结构<br><img src="http://p1.bpimg.com/567571/25652de43fea77e3.png" alt=""></p>
<p><code>log</code>是聊天记录存放目录</p>
<p><code>conn</code>是用来链接数据库的</p>
<p><code>index</code>，<code>login</code>，<code>logout</code>是登录，退出这些页面</p>
<p><code>ajax</code>是用于接受信息并储存在数据库或文件</p>
<p>最主要的还是<code>chat.php</code> 和<code>get.php</code></p>
<p><code>chat</code>是聊天室页面，用<code>ajax</code>不断的请求<code>get.php</code>获得聊天内容并展示<br><code>get.php</code>里把第一次请求时的聊天条数和第一次以后的聊天条数作对比，然后用死循环去不断查询数据库或者读本地文件获取聊天信息返回给<code>chat.php</code>，从而形成了即时聊天</p>
<p>这个只是一个简单粗暴的方法，性能和体验上还达不到要求，后续也将会去学习研究更好的解决方案</p>
]]></content>
    
    <summary type="html">
    
      php+ajax 简易即时聊天室
    
    </summary>
    
    
      <category term="ajax" scheme="http://likangjun.com/tags/ajax/"/>
    
      <category term="php" scheme="http://likangjun.com/tags/php/"/>
    
      <category term="即时聊天" scheme="http://likangjun.com/tags/%E5%8D%B3%E6%97%B6%E8%81%8A%E5%A4%A9/"/>
    
  </entry>
  
  <entry>
    <title>Hexo开启多说评论</title>
    <link href="http://likangjun.com/2016/10/14/Hexo%E5%BC%80%E5%90%AF%E5%A4%9A%E8%AF%B4%E8%AF%84%E8%AE%BA/"/>
    <id>http://likangjun.com/2016/10/14/Hexo开启多说评论/</id>
    <published>2016-10-14T01:11:02.000Z</published>
    <updated>2016-10-14T01:35:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Hexo静态博客中开启多说评论"><a href="#Hexo静态博客中开启多说评论" class="headerlink" title="Hexo静态博客中开启多说评论"></a>Hexo静态博客中开启多说评论</h2><p>首先要在<a href="http://duoshuo.com/" target="_blank" rel="external">多说</a>中申请一个账号，会得到一个多说的二级域名，我的就是<a href="http://likangjun.duoshuo.com" target="_blank" rel="external">http://likangjun.duoshuo.com</a></p>
<p>然后在hexo根部目录下<code>_config.yml</code>里配置自己的多说账号<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Comments</span></span><br><span class="line">duoshuo_shortname: liakngjun</span><br></pre></td></tr></table></figure></p>
<p>记得: 后面有一个空格</p>
<p>最后在主题文件<code>themes\landscape\layout\_partial\article.ejs</code><br>找到<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname)&#123; %&gt;</span><br><span class="line"> &lt;section id="comments"&gt;</span><br><span class="line">   &lt;div id="disqus_thread"&gt;</span><br><span class="line">     &lt;noscript&gt;Please enable JavaScript to view the &lt;a href="//disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line"> &lt;/section&gt;</span><br><span class="line"> &lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p>
<p>改为<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; config.duoshuo_shortname)&#123; %&gt;</span><br><span class="line">    &lt;section id="comments"&gt;</span><br><span class="line">        &lt;!-- 多说评论框 start --&gt;</span><br><span class="line">        &lt;div class="ds-thread" data-thread-key="&lt;%= post.layout %&gt;-&lt;%= post.slug %&gt;" data-title="&lt;%= post.title %&gt;" data-url="&lt;%= page.permalink %&gt;"&gt;&lt;/div&gt;</span><br><span class="line">        &lt;!-- 多说评论框 end --&gt;</span><br><span class="line">        &lt;!-- 多说公共JS代码 start (一个网页只需插入一次) --&gt;</span><br><span class="line">        &lt;script type="text/javascript"&gt;</span><br><span class="line">            var duoshuoQuery = &#123;short_name:'&lt;%= config.duoshuo_shortname %&gt;'&#125;;</span><br><span class="line">            (function() &#123;</span><br><span class="line">                var ds = document.createElement('script');</span><br><span class="line">                ds.type = 'text/javascript';ds.async = true;</span><br><span class="line">                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';</span><br><span class="line">                ds.charset = 'UTF-8';</span><br><span class="line">                (document.getElementsByTagName('head')[0]</span><br><span class="line">                || document.getElementsByTagName('body')[0]).appendChild(ds);</span><br><span class="line">            &#125;)();</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">        &lt;!-- 多说公共JS代码 end --&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p>
<p>也可以看到，我们可以写博客的时候通过comments来控制这篇是否开启评论</p>
]]></content>
    
    <summary type="html">
    
      Hexo静态博客中开启多说评论
    
    </summary>
    
    
      <category term="hexo" scheme="http://likangjun.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://likangjun.com/2016/06/13/hello-world/"/>
    <id>http://likangjun.com/2016/06/13/hello-world/</id>
    <published>2016-06-13T02:34:00.000Z</published>
    <updated>2016-10-13T15:31:46.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Welcome-to-Likangjun"><a href="#Welcome-to-Likangjun" class="headerlink" title="Welcome to Likangjun"></a>Welcome to <a href="http://likangjun.com/">Likangjun</a></h3><p>又是一个Hello World</p>
<p>上次写博客的时候还是WordPress</p>
<p>现在在<a href="http://blog.jayxhj.com/" target="_blank" rel="external">jayxhj</a>的推荐下用Hexo + github 搭建了这个静态博客</p>
<p>后续会做一些博客迁移</p>
<p>并将继续与大家交流，并分享一些有趣的技术</p>
<h3 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h3>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Welcome-to-Likangjun&quot;&gt;&lt;a href=&quot;#Welcome-to-Likangjun&quot; class=&quot;headerlink&quot; title=&quot;Welcome to Likangjun&quot;&gt;&lt;/a&gt;Welcome to &lt;a href=&quot;http:/
    
    </summary>
    
    
  </entry>
  
</feed>
